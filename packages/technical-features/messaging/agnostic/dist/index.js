(()=>{var e={417:(e,n,t)=>{"use strict";t.d(n,{w:()=>o});var s=t(610),i=t(290),r=t(344);e=t.hmd(e);const o=(0,r.getFeature)({id:"messaging",dependencies:[i.applicationFeature],register:n=>{(0,s.autoRegister)({di:n,targetModule:e,getRequireContexts:()=>[t(418)]})}})},275:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>h,listeningOfChannelsInjectionToken:()=>u});var s=t(905),i=t(470);const r=require("@k8slens/startable-stoppable"),o=require("@ogre-tools/injectable-extension-for-mobx"),a=require("mobx");var c=t(588),l=t(928),d=t(160);const u=(0,s.getInjectionToken)({id:"listening-of-channels-injection-token"}),g=(e,n,t)=>{const s=new Map,i=(0,a.reaction)((()=>e.get()),((e,i=[])=>{const r=e.filter((e=>!i.some((n=>n.id===e.id)))),o=i.filter((n=>!e.some((e=>e.id===n.id))));r.forEach((e=>{const i=t(e);if(s.has(i))throw new Error(`Tried to add listener for channel "${e.channel.id}" but listener already exists.`);const r=n(e);s.set(i,r)})),o.forEach((e=>{const n=s.get(t(e));null==n||n(),s.delete(t(e))}))}),{fireImmediately:!0});return()=>{i(),s.forEach((e=>e()))}},h=(0,s.getInjectable)({id:"listening-of-channels",instantiate:e=>{const n=e.inject(i.G),t=e.inject(d.f),s=e.inject(o.computedInjectManyInjectable),a=s(c.k),u=s(l.C);return(0,r.getStartableStoppable)("listening-of-channels",(()=>{const e=g(a,n,(e=>e.id)),s=g(u,t,(e=>e.channel.id));return()=>{e(),s()}}))},injectionToken:u})},653:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>o});var s=t(905),i=t(290),r=t(275);const o=(0,s.getInjectable)({id:"start-listening-of-channels",instantiate:e=>{const n=e.inject(r.listeningOfChannelsInjectionToken);return{run:async()=>{await n.start()}}},injectionToken:i.onLoadOfApplicationInjectionToken})},470:(e,n,t)=>{"use strict";t.d(n,{G:()=>s});const s=(0,t(905).getInjectionToken)({id:"listening-to-a-message-channel"})},588:(e,n,t)=>{"use strict";t.d(n,{A:()=>r,k:()=>i});var s=t(905);const i=(0,s.getInjectionToken)({id:"message-channel-listener"}),r=e=>(0,s.getInjectable)({id:`${e.channel.id}-message-listener-${e.id}`,instantiate:n=>({id:`${e.channel.id}-message-listener-${e.id}`,channel:e.channel,handler:e.getHandler(n)}),injectionToken:i,causesSideEffects:e.causesSideEffects})},778:(e,n,t)=>{"use strict";t.d(n,{v:()=>s});const s=(0,t(905).getInjectionToken)({id:"send-message-to-message-channel"})},160:(e,n,t)=>{"use strict";t.d(n,{f:()=>s});const s=(0,t(905).getInjectionToken)({id:"listening-to-a-request-channel"})},928:(e,n,t)=>{"use strict";t.d(n,{C:()=>i,K:()=>r});var s=t(905);const i=(0,s.getInjectionToken)({id:"request-channel-listener"}),r=e=>(0,s.getInjectable)({id:`${e.channel.id}-request-listener-${e.id}`,instantiate:n=>({id:`${e.channel.id}-request-listener-${e.id}`,channel:e.channel,handler:e.getHandler(n)}),injectionToken:i})},323:(e,n,t)=>{"use strict";t.d(n,{H:()=>s});const s=(0,t(905).getInjectionToken)({id:"request-from-request-channel"})},980:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var s=t(610),i=t(344),r=t(417);e=t.hmd(e);const o=(0,i.getFeature)({id:"messaging-for-unit-testing",dependencies:[r.w],register:n=>{(0,s.autoRegister)({di:n,targetModule:e,getRequireContexts:()=>[t(451)]})}})},829:(e,n,t)=>{"use strict";t.r(n),t.d(n,{enlistMessageChannelListenerStubInjectable:()=>l,enlistRequestChannelListenerStubInjectable:()=>u,requestFromChannelStubInjectable:()=>d,sendMessageToChannelStubInjectable:()=>c});var s=t(778),i=t(470),r=t(323),o=t(160),a=t(905);const c=(0,a.getInjectable)({id:"send-message-to-channel-stub",instantiate:()=>()=>{},injectionToken:s.v}),l=(0,a.getInjectable)({id:"enlist-message-channel-listener-stub",instantiate:()=>()=>()=>{},injectionToken:i.G}),d=(0,a.getInjectable)({id:"request-from-channel-stub",instantiate:()=>()=>Promise.resolve(),injectionToken:r.H}),u=(0,a.getInjectable)({id:"enlist-request-channel-listener-stub",instantiate:()=>()=>()=>{},injectionToken:o.f})},418:(e,n,t)=>{var s={"./listening-of-channels/listening-of-channels.injectable.ts":275,"./listening-of-channels/start-listening-of-channels.injectable.ts":653};function i(e){var n=r(e);return t(n)}function r(e){if(!t.o(s,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id=418},451:(e,n,t)=>{var s={"./test-doubles.injectable.ts":829};function i(e){var n=r(e);return t(n)}function r(e){if(!t.o(s,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id=451},290:e=>{"use strict";e.exports=require("@k8slens/application")},344:e=>{"use strict";e.exports=require("@k8slens/feature-core")},905:e=>{"use strict";e.exports=require("@ogre-tools/injectable")},610:e=>{"use strict";e.exports=require("@ogre-tools/injectable-extension-for-auto-registration")}},n={};function t(s){var i=n[s];if(void 0!==i)return i.exports;var r=n[s]={id:s,loaded:!1,exports:{}};return e[s](r,r.exports,t),r.loaded=!0,r.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},t.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{"use strict";t.r(s),t.d(s,{enlistMessageChannelListenerInjectionToken:()=>l.G,enlistRequestChannelListenerInjectionToken:()=>d.f,getMessageChannel:()=>r,getMessageChannelListenerInjectable:()=>c.A,getRequestChannel:()=>i,getRequestChannelListenerInjectable:()=>g.K,listeningOfChannelsInjectionToken:()=>u.listeningOfChannelsInjectionToken,messageChannelListenerInjectionToken:()=>c.k,messagingFeature:()=>n.w,requestChannelListenerInjectionToken:()=>g.C,requestFromChannelInjectionToken:()=>o.H,sendMessageToChannelInjectionToken:()=>a.v,testUtils:()=>e});var e={};t.r(e),t.d(e,{messagingFeatureForUnitTesting:()=>h.z});var n=t(417);const i=e=>({id:e}),r=e=>({id:e});var o=t(323),a=t(778),c=t(588),l=t(470),d=t(160),u=t(275),g=t(928),h=t(980)})(),module.exports=s})();