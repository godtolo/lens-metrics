(()=>{var e={421:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(905),s=n(73),a=n(49);const i=(0,r.getInjectable)({id:"enlist-message-channel-listener",instantiate:e=>{const t=e.inject(s.default);return({channel:e,handler:n})=>{const r=(e,t)=>{n(t,{frameId:e.frameId,processId:e.processId})};return t.on(e.id,r),()=>{t.off(e.id,r)}}},injectionToken:a.enlistMessageChannelListenerInjectionToken})},989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(905),s=n(73),a=n(49);const i=(0,r.getInjectable)({id:"enlist-request-channel-listener-for-main",instantiate:e=>{const t=e.inject(s.default);return({channel:e,handler:n})=>{const r=(e,t)=>n(t);return t.handle(e.id,r),()=>{t.off(e.id,r)}}},injectionToken:a.enlistRequestChannelListenerInjectionToken})},692:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});const r=require("@ogre-tools/injectable-extension-for-auto-registration"),s=require("@k8slens/feature-core");var a=n(49);e=n.hmd(e);const i=(0,s.getFeature)({id:"messaging-for-main",register:t=>{(0,r.autoRegister)({di:t,targetModule:e,getRequireContexts:()=>[n(888)]})},dependencies:[a.messagingFeature]})},73:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(905),s=n(496);const a=(0,r.getInjectable)({id:"ipc-main",instantiate:()=>s.ipcMain,causesSideEffects:!0})},459:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(905),s=n(49);const a=(0,r.getInjectable)({id:"request-from-channel",instantiate:()=>e=>{throw new Error(`Tried to request from channel "${e.id}" but requesting in "main" it's not supported yet`)},injectionToken:s.requestFromChannelInjectionToken})},13:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(49),s=n(121);const a=(0,r.getMessageChannel)("frame-communication-admin-channel"),i=(0,r.getMessageChannelListenerInjectable)({id:"allow-communication",channel:a,getHandler:e=>{const t=e.inject(s.default);return(e,{frameId:n,processId:r})=>{t.add({frameId:n,processId:r})}}})},121:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n(905).getInjectable)({id:"frame-ids",instantiate:()=>new Set})},374:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(905),s=n(496);const a=(0,r.getInjectable)({id:"web-contents",instantiate:()=>()=>s.webContents.getAllWebContents(),causesSideEffects:!0})},104:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(905);const s=require("@ogre-tools/fp");var a=n(49),i=n(374);const o=require("lodash/fp");var c=n(121);const l=e=>e.isDestroyed(),d=e=>e.isCrashed(),u=(0,r.getInjectable)({id:"send-message-to-channel",instantiate:e=>{const t=e.inject(i.default),n=e.inject(c.default);return(e,r)=>{var a;(0,s.pipeline)(t(),(0,o.reject)(l),(0,o.reject)(d),(0,o.flatMap)((e=>[(t,...n)=>e.send(t,...n),...[...n].map((({frameId:t,processId:n})=>(r,...s)=>{e.sendToFrame([t,n],r,...s)}))])),(a=t=>{t(e.id,r)},e=>e.forEach(a)))}},injectionToken:a.sendMessageToChannelInjectionToken})},888:(e,t,n)=>{var r={"./channel-listeners/enlist-message-channel-listener.injectable.ts":421,"./channel-listeners/enlist-request-channel-listener.injectable.ts":989,"./ipc-main/ipc-main.injectable.ts":73,"./request-from-channel/request-from-channel.injectable.ts":459,"./send-message-to-channel/allow-communication-listener.injectable.ts":13,"./send-message-to-channel/frameIds.injectable.ts":121,"./send-message-to-channel/get-web-contents.injectable.ts":374,"./send-message-to-channel/send-message-to-channel.injectable.ts":104};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id=888},49:e=>{"use strict";e.exports=require("@k8slens/messaging")},905:e=>{"use strict";e.exports=require("@ogre-tools/injectable")},496:e=>{"use strict";e.exports=require("electron")}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{messagingFeatureForMain:()=>e.v});var e=n(692)})(),module.exports=r})();